(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{627:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var s=a(5155),i=a(2115),r=a(4264),n=a.n(r),l=a(9867),o=a(2467),d=a(3101),c=a(2821),u=a(5889);function x(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,u.QP)((0,c.$)(t))}let m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function g(e){let{className:t,variant:a,size:i,asChild:r=!1,...n}=e,l=r?o.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:x(m({variant:a,size:i,className:t})),...n})}var v=a(273);function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:x("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:x("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:x("leading-none font-semibold",t),...a})}function j(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:x("px-6",t),...a})}var b=a(4466),y=a(9879),N=a(7734),w=a(4595),S=a(6411),C=a(6119);let k=["Legislative","Executive","Judicial","Elections","Rights & Liberties","Civil Society","Political Violence"],D={Legislative:{description:"Law-making, oversight, and checks on executive power.",accentColor:"#6366f1"},Executive:{description:"Administrative actions, transparency, and rule implementation.",accentColor:"#0ea5e9"},Judicial:{description:"Courts, judicial independence, and rule-of-law decisions.",accentColor:"#8b5cf6"},Elections:{description:"Voting access, election integrity, and representation.",accentColor:"#22c55e"},"Rights & Liberties":{description:"Civil liberties, minority protections, and free expression.",accentColor:"#f97316"},"Civil Society":{description:"Media, organizing, and civic participation.",accentColor:"#ec4899"},"Political Violence":{description:"Political intimidation, violence, and security of participants.",accentColor:"#ef4444"}};function I(){return Object.fromEntries(k.map(e=>[e,1]))}function E(e){let t;if(!e.length)return{total:0,positive:0,negative:0,netImpact:0,averageConfidence:0,latestEventDate:void 0};let a=0,s=0,i=0,r=0;for(let n of e)1===n.direction?a+=1:s+=1,i+=n.direction*n.magnitude*n.confidence,r+=n.confidence,(!t||new Date(n.date)>new Date(t))&&(t=n.date);return{total:e.length,positive:a,negative:s,netImpact:i,averageConfidence:r/e.length,latestEventDate:t}}new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date().toISOString();let A=JSON.stringify([{id:"ext-001",date:new Date().toISOString(),title:"Independent commission adopts fair maps",category:"Elections",direction:1,magnitude:3,confidence:.9,url:"https://example.com/source"},{id:"ext-002",date:new Date().toISOString(),title:"Court stays injunction; restrictive law reinstated",category:"Rights & Liberties",direction:-1,magnitude:2,confidence:.85}],null,2);var L=a(7013),O=a(7840);function M(e){let{event:t,detailed:a=!1}=e,i=1===t.direction?L.A:O.A,r=1===t.direction?"Towards Democracy":"Towards Autocracy",n=t.magnitude*t.confidence,l=D[t.category].accentColor;return(0,s.jsxs)("div",{className:"group relative overflow-hidden rounded-xl border transition-colors ".concat(1===t.direction?"border-green-200 bg-green-50/40":"border-red-200 bg-red-50/40"),children:[(0,s.jsx)(v.P.div,{className:"absolute inset-y-0 left-0 w-1",style:{backgroundColor:l},layoutId:"".concat(t.category,"-accent")}),(0,s.jsx)("div",{className:"p-3 md:p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"min-w-0 space-y-1",children:[(0,s.jsx)("div",{className:"truncate font-medium",children:t.title}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[new Date(t.date).toLocaleString()," \xb7 ",t.category]}),a&&t.summary&&(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:t.summary}),a&&t.url&&(0,s.jsx)("a",{className:"text-sm font-medium text-primary underline",href:t.url,target:"_blank",rel:"noreferrer",children:"Source"})]}),(0,s.jsxs)("div",{className:"flex shrink-0 flex-col items-end gap-1 text-right",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-full border px-2 py-1 text-xs font-medium ".concat(1===t.direction?"border-green-300 bg-green-100/70 text-green-900":"border-red-300 bg-red-100/70 text-red-900"),children:[(0,s.jsx)(i,{className:"h-3 w-3"}),1===t.direction?"+":"-",t.magnitude.toFixed(1)," \xb7 conf ",Math.round(100*t.confidence),"%"]}),(0,s.jsx)("div",{className:"text-[11px] uppercase tracking-wide text-muted-foreground",children:r}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Impact score ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:n.toFixed(2)})]})]})]})})]})}function z(e){let{index:t,history:a,categoryScores:r,events:n}=e,l=(0,i.useMemo)(()=>E(n),[n]),o=a.map(e=>({t:new Date(e.ts).toLocaleTimeString(),v:e.value}));return(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-5",children:[(0,s.jsxs)("div",{className:"space-y-4 md:col-span-3",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold md:text-3xl",children:["Today’s Index: ",t.toFixed(1)]}),(0,s.jsxs)("div",{className:"relative h-16 overflow-hidden rounded-2xl bg-gray-100",children:[(0,s.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,s.jsx)("div",{className:"h-full w-1/2 bg-red-50"}),(0,s.jsx)("div",{className:"h-full w-1/2 bg-green-50"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-px bg-gray-300"}),(0,s.jsx)(v.P.div,{className:"absolute top-0 h-full w-1.5 rounded bg-foreground",initial:{x:"50%"},animate:{x:"".concat(50+t/2,"%")},transition:{type:"spring",stiffness:120,damping:20}}),(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-xs font-medium",children:[(0,s.jsx)("span",{children:"-100 Autocracy"}),(0,s.jsx)("span",{children:"0"}),(0,s.jsx)("span",{children:"+100 Democracy"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-3 rounded-2xl border bg-muted/40 p-4 text-sm md:grid-cols-3",children:[(0,s.jsx)(F,{label:"Total events",value:l.total.toString()}),(0,s.jsx)(F,{label:"Net impact",value:"".concat(l.netImpact>=0?"+":"").concat(l.netImpact.toFixed(2)),tone:l.netImpact>=0?"positive":"negative"}),(0,s.jsx)(F,{label:"Avg. confidence",value:"".concat(Math.round(100*l.averageConfidence),"%")}),(0,s.jsx)(F,{label:"Positive",value:l.positive.toString(),tone:"positive"}),(0,s.jsx)(F,{label:"Negative",value:l.negative.toString(),tone:"negative"}),(0,s.jsx)(F,{label:"Last update",value:l.latestEventDate?new Date(l.latestEventDate).toLocaleString():"—"})]}),(0,s.jsx)("div",{className:"h-24",children:(0,s.jsx)(b.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.b,{data:o,margin:{top:8,bottom:0,left:0,right:0},children:[(0,s.jsx)(N.W,{dataKey:"t",hide:!0}),(0,s.jsx)(w.h,{domain:[-100,100],hide:!0}),(0,s.jsx)(S.m,{formatter:e=>"number"==typeof e?e.toFixed(1):e}),(0,s.jsx)(C.N,{type:"monotone",dataKey:"v",dot:!1,strokeWidth:2,stroke:"#111827"})]})})})]}),(0,s.jsxs)("div",{className:"space-y-4 md:col-span-2",children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{className:"py-3",children:(0,s.jsx)(f,{className:"text-sm",children:"Category Snapshot"})}),(0,s.jsx)(j,{className:"grid grid-cols-2 gap-3",children:k.map(e=>(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e}),(0,s.jsx)("span",{className:"font-medium",children:r[e].toFixed(0)})]}),(0,s.jsxs)("div",{className:"relative h-2 overflow-hidden rounded-full bg-gray-100",children:[(0,s.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,s.jsx)("div",{className:"h-full w-1/2 bg-red-50"}),(0,s.jsx)("div",{className:"h-full w-1/2 bg-green-50"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-px bg-gray-300"}),(0,s.jsx)(v.P.div,{className:"absolute top-0 h-full",style:{backgroundColor:D[e].accentColor,width:"3%"},initial:{x:"50%"},animate:{x:"".concat(50+r[e]/2,"%")},transition:{type:"spring",stiffness:120,damping:20}})]})]},e))})]}),(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{className:"py-3",children:(0,s.jsx)(f,{className:"text-sm",children:"Today’s Moves"})}),(0,s.jsx)(j,{className:"space-y-2",children:n.slice(0,3).map(e=>(0,s.jsx)(M,{event:e},e.id))})]})]})]})}function F(e){let{label:t,value:a,tone:i}=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:t}),(0,s.jsx)("div",{className:"text-lg font-semibold ".concat("positive"===i?"text-emerald-600":"negative"===i?"text-rose-600":"text-foreground"),children:a})]})}function T(e){let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:x("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}function P(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:x("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var _=a(9559);function R(e){let{value:t,accentColor:a}=e;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-2xl font-semibold",children:t.toFixed(1)}),(0,s.jsxs)("div",{className:"relative h-3 overflow-hidden rounded-full bg-gray-100",children:[(0,s.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,s.jsx)("div",{className:"h-full w-1/2 bg-red-50"}),(0,s.jsx)("div",{className:"h-full w-1/2 bg-green-50"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-px bg-gray-300"}),(0,s.jsx)(v.P.div,{className:"absolute top-0 h-full",style:{backgroundColor:a,width:"4%"},initial:{x:"50%"},animate:{x:"".concat(50+t/2,"%")},transition:{type:"spring",stiffness:120,damping:20}})]})]})}function V(e){let{events:t,setEvents:a,categoryScores:r}=e,[n,l]=(0,i.useState)({title:"",category:"Legislative",direction:1,magnitude:1,confidence:.8,url:""}),[o,d]=(0,i.useState)(""),[c,u]=(0,i.useState)("All"),[x,m]=(0,i.useState)("all"),[v,b]=(0,i.useState)(""),y=(0,i.useMemo)(()=>t.filter(e=>{var t;return("All"===c||e.category===c)&&("positive"!==x||1===e.direction)&&("negative"!==x||-1===e.direction)&&(!v||!!"".concat(e.title," ").concat(null!=(t=e.summary)?t:"").toLowerCase().includes(v.toLowerCase()))}),[t,c,x,v]),N=(0,i.useMemo)(()=>E(y),[y]);return(0,s.jsxs)("div",{className:"space-y-10",children:[(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Category Gauges"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Scores reflect decayed, confidence-weighted impacts over the past year."})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:k.map(e=>(0,s.jsxs)(h,{children:[(0,s.jsxs)(p,{className:"py-3",children:[(0,s.jsx)(f,{className:"text-base",children:e}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:D[e].description})]}),(0,s.jsx)(j,{children:(0,s.jsx)(R,{value:r[e],accentColor:D[e].accentColor})})]},e))})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Event Ledger"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Filter, search, and review the most recent developments."})]}),(0,s.jsxs)("div",{className:"grid gap-2 text-sm md:grid-cols-3",children:[(0,s.jsxs)("select",{className:"h-10 rounded-md border bg-background px-3",value:c,onChange:e=>u(e.target.value),children:[(0,s.jsx)("option",{value:"All",children:"All categories"}),k.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{className:"h-10 rounded-md border bg-background px-3",value:x,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"All directions"}),(0,s.jsx)("option",{value:"positive",children:"Pro-democracy"}),(0,s.jsx)("option",{value:"negative",children:"Anti-democracy"})]}),(0,s.jsx)(T,{placeholder:"Search events",value:v,onChange:e=>b(e.target.value)})]})]}),(0,s.jsx)(h,{children:(0,s.jsxs)(j,{className:"grid gap-4 py-4 md:grid-cols-4",children:[(0,s.jsx)(J,{label:"Visible events",value:N.total.toString()}),(0,s.jsx)(J,{label:"Positive",value:N.positive.toString(),tone:"positive"}),(0,s.jsx)(J,{label:"Negative",value:N.negative.toString(),tone:"negative"}),(0,s.jsx)(J,{label:"Net impact",value:"".concat(N.netImpact>=0?"+":"").concat(N.netImpact.toFixed(2)),tone:N.netImpact>=0?"positive":"negative"})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[0===y.length&&(0,s.jsx)("div",{className:"rounded-xl border border-dashed bg-muted/30 p-6 text-center text-sm text-muted-foreground",children:"No events match your filters yet."}),y.map(e=>(0,s.jsx)(M,{event:e,detailed:!0},e.id))]})]}),(0,s.jsxs)("section",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{className:"py-3",children:(0,s.jsx)(f,{children:"Add Event (Quick)"})}),(0,s.jsxs)(j,{className:"grid items-end gap-3 md:grid-cols-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-sm",children:"Title"}),(0,s.jsx)(T,{value:n.title,onChange:e=>l(t=>({...t,title:e.target.value})),placeholder:"e.g., Court blocks voter suppression bill"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm",children:"Category"}),(0,s.jsx)("select",{className:"h-10 w-full rounded-md border px-2",value:n.category,onChange:e=>l(t=>({...t,category:e.target.value})),children:k.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm",children:"Direction"}),(0,s.jsxs)("select",{className:"h-10 w-full rounded-md border px-2",value:n.direction,onChange:e=>l(t=>({...t,direction:Number(e.target.value)})),children:[(0,s.jsx)("option",{value:1,children:"Towards Democracy (+)"}),(0,s.jsx)("option",{value:-1,children:"Towards Autocracy (-)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm",children:"Magnitude"}),(0,s.jsx)(T,{type:"number",step:"0.1",value:n.magnitude,onChange:e=>l(t=>({...t,magnitude:Number(e.target.value)}))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm",children:"Confidence"}),(0,s.jsx)(T,{type:"number",step:"0.05",value:n.confidence,onChange:e=>l(t=>({...t,confidence:Number(e.target.value)}))})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-sm",children:"Source URL"}),(0,s.jsx)(T,{value:n.url,onChange:e=>l(t=>({...t,url:e.target.value})),placeholder:"https://example.com/source"})]}),(0,s.jsx)(g,{className:"md:col-span-1",onClick:()=>(function(e){var t,s,i,r,n;let o={id:"evt-".concat(crypto.randomUUID()),date:new Date().toISOString(),title:(null==(t=e.title)?void 0:t.trim())||"Untitled Event",category:e.category||"Legislative",direction:null!=(i=e.direction)?i:1,magnitude:Number(null!=(r=e.magnitude)?r:1),confidence:Number(null!=(n=e.confidence)?n:.8),url:(null==(s=e.url)?void 0:s.trim())||void 0};a(e=>[o,...e]),l(e=>({...e,title:"",url:""}))})(n),children:"Add"})]})]}),(0,s.jsxs)(h,{children:[(0,s.jsx)(p,{className:"py-3",children:(0,s.jsx)(f,{children:"Import Events (JSON)"})}),(0,s.jsxs)(j,{className:"space-y-2",children:[(0,s.jsx)(P,{rows:8,value:o,onChange:e=>d(e.target.value),placeholder:A}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(g,{onClick:function(){try{let e=JSON.parse(o);Array.isArray(e)&&a(t=>(function(e,t){let a=new Map(e.map(e=>[e.id,e]));for(let e of t)a.set(e.id,e);return Array.from(a.values()).sort((e,t)=>new Date(t.date)-new Date(e.date))})(t,e)),d("")}catch(e){console.error("Failed to import events",e),alert("Invalid JSON. Expect an array of EventItem objects.")}},children:[(0,s.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Import"]}),(0,s.jsx)(g,{variant:"secondary",onClick:()=>d(A),children:"Load Example"})]})]})]})]})]})}function J(e){let{label:t,value:a,tone:i}=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:t}),(0,s.jsx)("div",{className:"text-lg font-semibold ".concat("positive"===i?"text-emerald-600":"negative"===i?"text-rose-600":"text-foreground"),children:a})]})}var U=a(8497);function W(e){let{className:t,defaultValue:a,value:r,min:n=0,max:l=100,...o}=e,d=i.useMemo(()=>Array.isArray(r)?r:Array.isArray(a)?a:[n,l],[r,a,n,l]);return(0,s.jsxs)(U.bL,{"data-slot":"slider",defaultValue:a,value:r,min:n,max:l,className:x("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...o,children:[(0,s.jsx)(U.CC,{"data-slot":"slider-track",className:x("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,s.jsx)(U.Q6,{"data-slot":"slider-range",className:x("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>(0,s.jsx)(U.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}function Q(e){let{weights:t,setWeights:a}=e,r=(0,i.useMemo)(()=>Object.values(t).reduce((e,t)=>e+t,0),[t]);return(0,s.jsxs)(h,{children:[(0,s.jsxs)(p,{className:"flex flex-wrap items-center justify-between gap-3 py-3",children:[(0,s.jsx)(f,{children:"Category Weights"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)("span",{children:"Total weight:"}),(0,s.jsx)("span",{className:"font-semibold text-foreground",children:r.toFixed(2)})]})]}),(0,s.jsxs)(j,{className:"grid gap-4 md:grid-cols-2",children:[k.map(e=>{let i=r>0?t[e]/r*100:0;return(0,s.jsxs)("div",{className:"space-y-2 rounded-xl bg-muted/40 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-medium",children:e}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:t[e].toFixed(2)})]}),(0,s.jsx)(W,{value:[t[e]],min:0,max:3,step:.05,onValueChange:t=>a(a=>({...a,[e]:t[0]}))}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[i.toFixed(0),"% of total influence"]})]},e)}),(0,s.jsx)(g,{variant:"secondary",onClick:function(){a(I())},className:"md:col-span-2",children:"Reset weights"})]})]})}function K(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(()=>I()),[o,d]=(0,i.useState)([]);(0,i.useEffect)(()=>{t([{id:"seed-1",date:new Date(Date.now()-2592e5).toISOString(),title:"Court curtails gerrymandered map",category:"Elections",direction:1,magnitude:2.5,confidence:.9,url:"#"},{id:"seed-2",date:new Date(Date.now()-864e5).toISOString(),title:"Legislature advances voter ID expansion",category:"Elections",direction:-1,magnitude:2,confidence:.8},{id:"seed-3",date:new Date().toISOString(),title:"Peaceful mass protest for press freedom",category:"Civil Society",direction:1,magnitude:1.2,confidence:.7}])},[]);let c=(0,i.useMemo)(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=Math.log(2)/365,s=Object.fromEntries(k.map(e=>[e,0]));for(let i of e){let e=Math.exp(-a*Math.max(0,(t.getTime()-new Date(i.date).getTime())/864e5)),r=i.direction*i.magnitude*i.confidence*e;s[i.category]+=r}let i={...s};for(let e of k)i[e]=100*Math.tanh(s[e]/10);return i})(e),[e]),u=(0,i.useMemo)(()=>(function(e,t){let a=Object.values(t).reduce((e,t)=>e+t,0)||1;return k.reduce((a,s)=>a+e[s]*t[s],0)/a})(c,a),[c,a]);(0,i.useEffect)(()=>{d(e=>[...e.slice(-199),{ts:Date.now(),value:u}])},[u]),(0,i.useEffect)(()=>{let e=setInterval(()=>{d(e=>[...e.slice(-199),{ts:Date.now(),value:u}])},2e3);return()=>clearInterval(e)},[u]);let x=(0,i.useRef)(null),{text:m,iso:v}=function(){let[e,t]=i.useState(""),[a,s]=i.useState("");return(0,i.useEffect)(()=>{let e=()=>{let e=new Date;s(e.toISOString()),t(e.toLocaleString())};e();let a=setInterval(e,1e3);return()=>clearInterval(a)},[]),{text:e,iso:a}}();async function h(){if(!x.current)return;let e=await n()(x.current,{backgroundColor:"#ffffff",scale:2}),t=document.createElement("a");t.download="democracy-tracker-".concat(new Date().toISOString().slice(0,10),".png"),t.href=e.toDataURL("image/png"),t.click()}return(0,s.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 border-b bg-white/80 backdrop-blur",children:(0,s.jsxs)("div",{className:"mx-auto flex max-w-5xl items-center justify-between gap-3 px-4 py-3",children:[(0,s.jsx)("div",{className:"text-lg font-semibold",children:"U.S. Democracy Tracker"}),(0,s.jsx)("div",{className:"flex items-center gap-2 text-xs opacity-70",children:(0,s.jsx)("time",{dateTime:v,suppressHydrationWarning:!0,children:m||"—"})}),(0,s.jsxs)(g,{onClick:h,size:"sm",className:"shrink-0",children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Export Card"]})]})}),(0,s.jsx)("section",{className:"mx-auto max-w-5xl px-4 py-6",children:(0,s.jsx)("div",{ref:x,className:"rounded-3xl border bg-white p-5 shadow-sm md:p-6",children:(0,s.jsx)(z,{index:u,history:o,categoryScores:c,events:e})})}),(0,s.jsxs)("main",{className:"mx-auto max-w-5xl space-y-8 px-4 pb-16",children:[(0,s.jsx)(V,{events:e,setEvents:t,categoryScores:c}),(0,s.jsx)(Q,{weights:a,setWeights:r})]})]})}},5957:(e,t,a)=>{Promise.resolve().then(a.bind(a,627))}},e=>{e.O(0,[316,198,441,255,358],()=>e(e.s=5957)),_N_E=e.O()}]);