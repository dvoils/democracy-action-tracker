(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2864:(e,t,s)=>{Promise.resolve().then(s.bind(s,8148))},8148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(5155),i=s(2115),r=s(273),n=s(8497),l=s(2821),d=s(5889);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.QP)((0,l.$)(t))}function o(e){let{className:t,defaultValue:s,value:r,min:l=0,max:d=100,...o}=e,u=i.useMemo(()=>Array.isArray(r)?r:Array.isArray(s)?s:[l,d],[r,s,l,d]);return(0,a.jsxs)(n.bL,{"data-slot":"slider",defaultValue:s,value:r,min:l,max:d,className:c("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...o,children:[(0,a.jsx)(n.CC,{"data-slot":"slider-track",className:c("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,a.jsx)(n.Q6,{"data-slot":"slider-range",className:c("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:u.length},(e,t)=>(0,a.jsx)(n.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}var u=s(2467);let x=(0,s(3101).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:t,variant:s,size:i,asChild:r=!1,...n}=e,l=r?u.DX:"button";return(0,a.jsx)(l,{"data-slot":"button",className:c(x({variant:s,size:i,className:t})),...n})}function h(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:c("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function g(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:c("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function v(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:c("leading-none font-semibold",t),...s})}function f(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:c("px-6",t),...s})}function p(e){let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:c("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}function b(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:c("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}var j=s(9867),y=s(9559),N=s(7013),w=s(7840),k=s(4466),S=s(9879),C=s(7734),D=s(4595),E=s(6411),A=s(6119),I=s(4264),O=s.n(I);let z=["Legislative","Executive","Judicial","Elections","Rights & Liberties","Civil Society","Political Violence"],L=[{id:"seed-1",date:new Date(Date.now()-2592e5).toISOString(),title:"Court curtails gerrymandered map",category:"Elections",direction:1,magnitude:2.5,confidence:.9,url:"#"},{id:"seed-2",date:new Date(Date.now()-864e5).toISOString(),title:"Legislature advances voter ID expansion",category:"Elections",direction:-1,magnitude:2,confidence:.8},{id:"seed-3",date:new Date().toISOString(),title:"Peaceful mass protest for press freedom",category:"Civil Society",direction:1,magnitude:1.2,confidence:.7}];function _(){let[e,t]=(0,i.useState)(L),[s,r]=(0,i.useState)(()=>Object.fromEntries(z.map(e=>[e,1]))),[n,l]=(0,i.useState)([]),d=(0,i.useMemo)(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,s=Math.log(2)/365,a=z.reduce((e,t)=>(e[t]=0,e),{});for(let i of e){let e=Math.exp(-s*Math.max(0,(t.getTime()-new Date(i.date).getTime())/864e5)),r=i.direction*i.magnitude*i.confidence*e;a[i.category]+=r}let i={...a};for(let e of z)i[e]=100*Math.tanh(a[e]/10);return i})(e),[e]),c=(0,i.useMemo)(()=>(function(e,t){let s=Object.values(t).reduce((e,t)=>e+t,0)||1;return z.reduce((s,a)=>s+e[a]*t[a],0)/s})(d,s),[d,s]);(0,i.useEffect)(()=>{let e=setInterval(()=>l(e=>[...e.slice(-199),{ts:Date.now(),value:c}]),2e3);return()=>clearInterval(e)},[c]);let o=(0,i.useRef)(null);async function u(){if(!o.current)return;let e=await O()(o.current,{backgroundColor:"#ffffff",scale:2}),t=document.createElement("a");t.download="democracy-tracker-".concat(new Date().toISOString().slice(0,10),".png"),t.href=e.toDataURL("image/png"),t.click()}return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur border-b",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"U.S. Democracy Tracker"}),(0,a.jsx)("div",{className:"flex items-center gap-2 text-xs opacity-70",children:new Date().toLocaleString()}),(0,a.jsxs)(m,{onClick:u,size:"sm",className:"shrink-0",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Export Card"]})]})}),(0,a.jsx)("section",{className:"max-w-5xl mx-auto px-4 py-6",children:(0,a.jsx)("div",{ref:o,className:"rounded-3xl border shadow-sm p-5 md:p-6 bg-white",children:(0,a.jsx)(M,{index:c,history:n,categoryScores:d,events:e})})}),(0,a.jsxs)("main",{className:"max-w-5xl mx-auto px-4 pb-16 space-y-8",children:[(0,a.jsx)(T,{events:e,setEvents:t,categoryScores:d}),(0,a.jsx)(F,{weights:s,setWeights:r})]})]})}function M(e){let{index:t,history:s,categoryScores:i,events:n}=e;return(0,a.jsxs)("div",{className:"grid md:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-3 space-y-3",children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold",children:["Today’s Index: ",t.toFixed(1)]}),(0,a.jsxs)("div",{className:"relative h-16 rounded-2xl bg-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,a.jsx)("div",{className:"w-1/2 h-full bg-red-50"}),(0,a.jsx)("div",{className:"w-1/2 h-full bg-green-50"})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-px bg-gray-300"}),(0,a.jsx)(r.P.div,{className:"absolute top-0 h-full w-1.5 bg-black rounded",initial:{x:"50%"},animate:{x:"".concat(50+t/2,"%")},transition:{type:"spring",stiffness:120,damping:20}}),(0,a.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-xs font-medium",children:[(0,a.jsx)("span",{children:"-100 Autocracy"}),(0,a.jsx)("span",{children:"0"}),(0,a.jsx)("span",{children:"+100 Democracy"})]})]}),(0,a.jsx)("div",{className:"h-24",children:(0,a.jsx)(k.u,{width:"100%",height:"100%",children:(0,a.jsxs)(S.b,{data:s.map(e=>({t:new Date(e.ts).toLocaleTimeString(),v:e.value})),children:[(0,a.jsx)(C.W,{dataKey:"t",hide:!0}),(0,a.jsx)(D.h,{domain:[-100,100],hide:!0}),(0,a.jsx)(E.m,{formatter:e=>"number"==typeof e?e.toFixed(1):String(e)}),(0,a.jsx)(A.N,{type:"monotone",dataKey:"v",dot:!1})]})})})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"py-3",children:(0,a.jsx)(v,{className:"text-sm",children:"Category Snapshot"})}),(0,a.jsx)(f,{className:"grid grid-cols-2 gap-3",children:z.map(e=>(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"opacity-70",children:e}),(0,a.jsx)("span",{className:"font-medium",children:i[e].toFixed(0)})]}),(0,a.jsxs)("div",{className:"relative h-2 rounded-full bg-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,a.jsx)("div",{className:"w-1/2 h-full bg-red-50"}),(0,a.jsx)("div",{className:"w-1/2 h-full bg-green-50"})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-px bg-gray-300"}),(0,a.jsx)(r.P.div,{className:"absolute top-0 h-full bg-black",initial:{x:"50%",width:"3%"},animate:{x:"".concat(50+i[e]/2,"%")},transition:{type:"spring",stiffness:120,damping:20},style:{width:"3%"}})]})]},e))})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"py-3",children:(0,a.jsx)(v,{className:"text-sm",children:"Today’s Moves"})}),(0,a.jsx)(f,{className:"space-y-2",children:n.slice(0,3).map(e=>(0,a.jsx)(U,{e:e},e.id))})]})]})]})}function T(e){let{events:t,setEvents:s,categoryScores:r}=e,[n,l]=(0,i.useState)({title:"",category:"Legislative",direction:1,magnitude:1,confidence:.8}),[d,c]=(0,i.useState)("");return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Category Gauges"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:z.map(e=>(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"py-3",children:(0,a.jsx)(v,{className:"text-base",children:e})}),(0,a.jsx)(f,{children:(0,a.jsx)(P,{value:r[e]})})]},e))})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Event Ledger"}),(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)(U,{e:e,detailed:!0},e.id))})]}),(0,a.jsxs)("section",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"py-3",children:(0,a.jsx)(v,{children:"Add Event (Quick)"})}),(0,a.jsxs)(f,{className:"grid md:grid-cols-6 gap-3 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"text-sm",children:"Title"}),(0,a.jsx)(p,{value:n.title,onChange:e=>l({...n,title:e.target.value}),placeholder:"e.g., Court blocks voter suppression bill"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Category"}),(0,a.jsx)("select",{className:"w-full border rounded-md h-10 px-2",value:n.category,onChange:e=>l({...n,category:e.target.value}),children:z.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Direction"}),(0,a.jsxs)("select",{className:"w-full border rounded-md h-10 px-2",value:n.direction,onChange:e=>l({...n,direction:Number(e.target.value)}),children:[(0,a.jsx)("option",{value:1,children:"Towards Democracy (+)"}),(0,a.jsx)("option",{value:-1,children:"Towards Autocracy (-)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Magnitude"}),(0,a.jsx)(p,{type:"number",step:"0.1",value:n.magnitude,onChange:e=>l({...n,magnitude:Number(e.target.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm",children:"Confidence"}),(0,a.jsx)(p,{type:"number",step:"0.05",value:n.confidence,onChange:e=>l({...n,confidence:Number(e.target.value)})})]}),(0,a.jsx)(m,{className:"md:col-span-1",onClick:()=>(function(e){var t,a,i;let r={id:"evt-".concat(crypto.randomUUID()),date:new Date().toISOString(),title:e.title||"Untitled Event",category:e.category||"Legislative",direction:null!=(t=e.direction)?t:1,magnitude:Number(null!=(a=e.magnitude)?a:1),confidence:Number(null!=(i=e.confidence)?i:.8),url:e.url};s(e=>[r,...e])})(n),children:"Add"})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"py-3",children:(0,a.jsx)(v,{children:"Import Events (JSON)"})}),(0,a.jsxs)(f,{className:"space-y-2",children:[(0,a.jsx)(b,{rows:8,value:d,onChange:e=>c(e.target.value),placeholder:J}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m,{onClick:function(){try{let e=JSON.parse(d);Array.isArray(e)&&s(t=>(function(e,t){let s=new Map(e.map(e=>[e.id,e]));for(let e of t)s.set(e.id,e);return Array.from(s.values()).sort((e,t)=>new Date(t.date)-new Date(e.date))})(t,e)),c("")}catch(e){alert("Invalid JSON. Expect an array of EventItem objects.")}},children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Import"]}),(0,a.jsx)(m,{variant:"secondary",onClick:()=>c(J),children:"Load Example"})]})]})]})]})]})}function F(e){let{weights:t,setWeights:s}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"py-3",children:(0,a.jsx)(v,{children:"Category Weights"})}),(0,a.jsx)(f,{className:"grid md:grid-cols-2 gap-4",children:z.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:e}),(0,a.jsx)("span",{className:"text-sm opacity-70",children:t[e].toFixed(2)})]}),(0,a.jsx)(o,{value:[t[e]],min:0,max:3,step:.05,onValueChange:t=>s(s=>({...s,[e]:t[0]}))})]},e))})]})}function P(e){let{value:t}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold",children:t.toFixed(1)}),(0,a.jsxs)("div",{className:"relative h-3 rounded-full bg-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,a.jsx)("div",{className:"w-1/2 h-full bg-red-50"}),(0,a.jsx)("div",{className:"w-1/2 h-full bg-green-50"})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-px bg-gray-300"}),(0,a.jsx)(r.P.div,{className:"absolute top-0 h-full bg-black",initial:{x:"50%",width:"2%"},animate:{x:"".concat(50+t/2,"%")},transition:{type:"spring",stiffness:120,damping:20},style:{width:"2%"}})]})]})}function U(e){let{e:t,detailed:s=!1}=e,i=1===t.direction?N.A:w.A;return(0,a.jsx)("div",{className:"p-3 rounded-xl border ".concat(1===t.direction?"bg-green-50/40 border-green-200":"bg-red-50/40 border-red-200"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"font-medium truncate",children:t.title}),(0,a.jsxs)("div",{className:"text-xs opacity-70",children:[new Date(t.date).toLocaleString()," \xb7 ",t.category]}),s&&t.summary&&(0,a.jsx)("div",{className:"text-sm mt-1",children:t.summary}),s&&t.url&&(0,a.jsx)("a",{className:"text-sm underline",href:t.url,target:"_blank",rel:"noreferrer",children:"Source"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 shrink-0",children:(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium border flex items-center gap-1 ".concat(1===t.direction?"bg-green-50 border-green-300":"bg-red-50 border-red-300"),children:[(0,a.jsx)(i,{className:"w-3 h-3"}),1===t.direction?"+ ":"- ",t.magnitude.toFixed(1)," \xb7 conf ",Math.round(100*t.confidence),"%"]})})]})})}let J='[\n  {"id":"ext-001","date":"'.concat(new Date().toISOString(),'","title":"Independent commission adopts fair maps","category":"Elections","direction":1,"magnitude":3.0,"confidence":0.9,"url":"https://example.com/source"},\n  {"id":"ext-002","date":"').concat(new Date().toISOString(),'","title":"Court stays injunction; restrictive law reinstated","category":"Rights & Liberties","direction":-1,"magnitude":2.0,"confidence":0.85}\n]')}},e=>{e.O(0,[316,198,441,255,358],()=>e(e.s=2864)),_N_E=e.O()}]);